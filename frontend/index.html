<!DOCTYPE html>
<html>
<head>
    <title>Fashion Item Search</title>
    <style>
        body {
            font-family: sans-serif;
        }
        .search-container {
            margin-bottom: 20px;
        }
        .result-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
        .result-item img {
            max-width: 100px;
            max-height: 100px;
            margin-right: 10px;
            float: left;
        }
        .result-item::after {
            content: "";
            display: table;
            clear: both;
        }
    </style>
</head>
<body>
  <script type="module">
    async function searchItemsWithCurl() {
        const query = document.getElementById('searchInput').value;
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';
        const namespace = "";
        const apiKey = "pcsk_6x3uAk_9t8PaNmdJx3kTVMJ5PENnRhQXYgdRJ4QZoQA79krQmpcXyL9XmXxWKEBxmLqXYP";
        const indexName = "sg"; // Beachten Sie den Unterschied zum Python-Code
        const indexHost = "sg-va8ozeb.svc.aped-4627-b74a.pinecone.io";
    
        const url = `https://${indexHost}/indexes/${indexName}/search`; // Korrigierter Endpunkt
        
        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Api-Key': apiKey,
                    'Content-Type': 'application/json'
                },
                mode: 'no-cors',

                body: JSON.stringify({
                    vector: null,
                    top_k: 2,
                    namespace: namespace,
                    query: query
                })
            });
    
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
    
            const data = await response.json();
            console.log(data);
            
            // Hier mÃ¼ssen Sie die Datenverarbeitung entsprechend anpassen
            data.matches.forEach(result => {
                const resultItem = document.createElement('div');
                resultItem.classList.add('result-item');
                
                const details = document.createElement('div');
                details.innerHTML = `
                    <p><strong>${result.score}</strong></p>
                    <p>${result.value}</p>`;
                resultItem.appendChild(details);
                resultsDiv.appendChild(resultItem);
            });
        } catch (error) {
            resultsDiv.innerHTML = 'Error loading data or performing search.';
            console.error('Error:', error);
        }
    }
    
    window.searchItemsWithCurl = searchItemsWithCurl;
    </script>
<div class="search-container">
    <input type="text" id="searchInput" placeholder="Enter search query">
    <button onclick="searchItemsWithCurl()">Search</button>
</div>
<div id="results">
    <!-- Search results will be displayed here -->
</div>
</body>
</html>